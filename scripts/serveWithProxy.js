import{createRequire as e}from"module";import*as o from"colors";import*as r from"@capacitor/core";var t={d:(e,o)=>{for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o)};const n=e(import.meta.url)("child_process"),s=(a={default:()=>o.default},l={},t.d(l,a),l);var a,l;const i=(e=>{var o={};return t.d(o,e),o})({Capacitor:()=>r.Capacitor}),c="undefined"!=typeof process?null===process||void 0===process?void 0:process.env:void 0,p=(!i.Capacitor.isNativePlatform()&&(void 0===c.MODE||c.MODE),"undefined"!=typeof process&&process.argv.includes("webpack --watch")),d=/Development server running!/,u=/Local: |\n/g,v=(s.default.grey((new Date).toLocaleTimeString(Intl.DateTimeFormat().resolvedOptions().locale)),s.default.cyan.bold(" [webAppDevProxy] "),(e,o)=>{var r;o&&(r=o,console.log(s.default.red("  ➜ Error: Unable to serve Ionic App")+s.default.cyan(`\n\nNote: The ${s.default.yellow("serveWithProxy")} script is supposed to run in an Ionic project directory.\nPlease make sure that the Ionic CLI is installed on your system and that \nthis script is executed in the root directory of your Ionic project.\nIf you intend to run the proxy server only, use the ${s.default.yellow("startServer")} script.\nFor more information, read the original error message below.\n\n`)+s.default.red(r.message))),e.killed||e.kill("SIGTERM")});var m;console.log((p?"\n":"")+"Starting Ionic app development server ...\n");const f=(0,n.spawn)("ionic",["serve","--no-open"]);null===(m=f.stdout)||void 0===m||m.on("data",(e=>{const o=e.toString();if(d.test(e)){const e=((e,o)=>{const r=e.match(/Local: .*\n/);if(!r||!r.length)return v(o,{message:"Error: Unable to retrieve local Ionic app development server URL"}),null;const t=r[0].replace(u,"");return/^(https?:\/\/(www\.)?([\w0-9-]+\.?)+([a-z]{2,63})?|([0-9]{1,3}\.){3}[0-9]{1,3}):[0-9]{1,5}$/.test(t)?t:(v(o,{message:`Error: Ionic app development server address [${t}] is invalid`}),null)})(o,f);if(!e)return;r=e,console.log(s.default.green(`  ➜ ${r}\n`)),(0,n.fork)("./scripts/startServer.js")}else{var r;/hmr update/.test(o)&&console.log(o.replace(/^\[vite\] |\n/g,""))}})),f.on("exit",(()=>{console.log("\nShutting down Ionic app development server ...")}));